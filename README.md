# k8s-cluster

My own cluster.

## Technologies used

- Nix
- kubenix (Nix module for generating k8s manifests)
- kubectl (to apply the configuration)
- cloudflared (to setup tunnel)


## Usage

### Push Images

Push images (if any) that are created by you with kubenix.

```bash
$ nix build '.#images'
$ ./result --insecure-policy
```

Notes:
- Requirement is to have authentication file `~/.docker/config.json` - can be generated by running `docker login`.
- Insecure policy is enabled here only because when you do not have registry allowed inside `/etc/containers/policy.json`.
- No need to have docker-cli installed for pushing.


### Apply to cluster

```bash
$ nix build '.'
$ kubectl apply -f result
```
